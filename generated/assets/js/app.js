!function(){"use strict";async function e(e,t,i){const n=await async function(e,t,i){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");const n=document.getElementById(e);n.width=t,n.height=i;const o=/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent),a=await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:o?void 0:t,height:o?void 0:i}});return n.srcObject=a,new Promise(e=>{n.onloadedmetadata=()=>{e(n)}})}(e,t,i);return n.play(),n}function t(e,t,i,n,o,a){e.beginPath(),e.arc(i,t,n,0,2*Math.PI),e.fillStyle=o,e.fillText(a,i+5,t),e.fill()}const i=800,n=650;posenet.load({architecture:"MobileNetV1",outputStride:16,inputResolution:513,multiplier:.75}).then(async function(o){let a;try{a=await e("video",i,n)}catch(e){throw document.getElementById("info").innerHTML="Could not load video",e}!function(e,o){const a=document.getElementById("output"),r=a.getContext("2d");a.width=i,a.height=n,async function a(){const c=await o.estimatePoses(e,{flipHorizontal:!0,decodingMethod:"single-person"});r.clearRect(0,0,i,n);!function(e,t,i,n){e.save(),e.scale(-1,1),e.translate(-i,0),e.drawImage(t,0,0,i,n),e.restore()}(r,e,i,n);c.forEach(({score:e,keypoints:i})=>{e>=.4&&function(e,i,n,o=1){for(let a=0;a<e.length;a++){const r=e[a];if(r.score<i)continue;const{y:c,x:s}=r.position;t(n,c*o,s*o,3,"#ff2626",r.part+" "+r.score.toFixed(4))}}(i,.6,r)});setTimeout(function(){requestAnimationFrame(a)},2e3)}()}(a,o)})}();