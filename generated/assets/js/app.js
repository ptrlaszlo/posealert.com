!function(){"use strict";async function t(t,e,i){const n=await async function(t,e,i){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");const n=document.getElementById(t);n.width=e,n.height=i;const o=await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}});return n.srcObject=o,new Promise(t=>{n.onloadedmetadata=()=>{t(n)}})}(t,e,i);return n.play(),n}function e(t,e,i,n,o,a){t.beginPath(),t.arc(i,e,n,0,2*Math.PI),t.fillStyle=o,t.fillText(a,i+5,e),t.fill()}const i=800,n=650;posenet.load({architecture:"MobileNetV1",outputStride:16,inputResolution:513,multiplier:.75}).then(async function(o){let a;try{a=await t("video",i,n)}catch(t){throw t}!function(t,o){const a=document.getElementById("output"),c=a.getContext("2d");a.width=i,a.height=n,async function a(){const r=await o.estimatePoses(t,{flipHorizontal:!0,decodingMethod:"single-person"});c.clearRect(0,0,i,n);r.forEach(({score:t,keypoints:i})=>{t>=.3&&function(t,i,n,o=1){for(let a=0;a<t.length;a++){const c=t[a];if(c.score<i)continue;const{y:r,x:s}=c.position;e(n,r*o,s*o,3,"#ff2626",c.part+" "+c.score.toFixed(4))}}(i,.6,c)});setTimeout(function(){requestAnimationFrame(a)},2e3)}()}(a,o)})}();