!function(){"use strict";async function t(t,e,o){const i=await async function(t,e,o){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");const i=document.getElementById(t);i.width=e,i.height=o;const n=/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent),a=await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:n?void 0:e,height:n?void 0:o}});return i.srcObject=a,new Promise(t=>{i.onloadedmetadata=()=>{t(i)}})}(t,e,o);return i.play(),i}function e(t,e,o,i,n,a){t.beginPath(),t.arc(o,e,i,0,2*Math.PI),t.fillStyle=n,t.fillText(a,o+5,e),t.fill()}const o=800,i=650;posenet.load({architecture:"ResNet50",outputStride:32,inputResolution:257,quantBytes:2}).then(async function(n){let a;try{a=await t("video",o,i)}catch(t){throw console.log("No video"),t}!function(t,n){const a=document.getElementById("output"),s=a.getContext("2d");a.width=o,a.height=i,async function t(n,a,s){let c=[];let r;let d;const l=await a.estimatePoses(n,{flipHorizontal:!0,decodingMethod:"single-person"});60==Math.floor(100*Math.random()+1)&&console.log(l);c=c.concat(l);r=.4;d=.6;s.clearRect(0,0,o,i);!function(t,e,o,i){t.save(),t.scale(-1,1),t.translate(-o,0),t.drawImage(e,0,0,o,i),t.restore()}(s,n,o,i);c.forEach(({score:t,keypoints:o})=>{t>=.4&&function(t,o,i,n=1){for(let a=0;a<t.length;a++){const s=t[a];if(s.score<o)continue;const{y:c,x:r}=s.position;e(i,c*n,r*n,3,"#ff2626",s.part+" "+s.score.toFixed(4))}}(o,.6,s)});requestAnimationFrame(t(n,a,s))}(t,n,s)}(a,n)})}();