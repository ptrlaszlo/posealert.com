!function(){"use strict";async function t(t,e,o){const i=await async function(t,e,o){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");const i=document.getElementById(t);i.width=e,i.height=o;const n=/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent),a=await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:n?void 0:e,height:n?void 0:o}});return i.srcObject=a,new Promise(t=>{i.onloadedmetadata=()=>{t(i)}})}(t,e,o);return i.play(),i}const e=800,o=650;function i(t,e,o,i,n,a){t.beginPath(),t.arc(o,e,i,0,2*Math.PI),t.fillStyle=n,t.fillText(a,o+5,e),t.fill()}posenet.load({architecture:"ResNet50",outputStride:32,inputResolution:257,quantBytes:2}).then(async function(n){let a;try{a=await t("video",e,o)}catch(t){throw console.log("No video"),t}!function(t,n){const a=document.getElementById("output"),s=a.getContext("2d");a.width=e,a.height=o,async function t(n,a,s){let r=[];let c;let d;const l=await a.estimatePoses(n,{flipHorizontal:!0,decodingMethod:"single-person"});60==Math.floor(100*Math.random()+1)&&console.log(l);r=r.concat(l);c=.4;d=.6;s.clearRect(0,0,e,o);s.save();s.scale(-1,1);s.translate(-e,0);s.drawImage(n,0,0,e,o);s.restore();r.forEach(({score:t,keypoints:e})=>{t>=.4&&function(t,e,o,n=1){for(let a=0;a<t.length;a++){const s=t[a];if(s.score<e)continue;const{y:r,x:c}=s.position,d="#ff2626";i(o,r*n,c*n,3,d,s.part+" "+s.score.toFixed(4))}}(e,.6,s)});requestAnimationFrame(t(n,a,s))}(t,n,s)}(a,n)})}();