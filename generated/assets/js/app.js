!function(){"use strict";async function e(e,t,n){const o=await async function(e,t,n){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");const o=document.getElementById(e);o.width=t,o.height=n;const i=await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}});return o.srcObject=i,new Promise(e=>{o.onloadedmetadata=()=>{e(o)}})}(e,t,n);return o.play(),o}function t(e,t,o,i,a,c){e.clearRect(0,0,t,o),i.forEach(({score:t,keypoints:o})=>{t>=a&&function(e,t,o,i=1){for(let a=0;a<e.length;a++){const c=e[a];if(c.score<t)continue;const{y:s,x:r}=c.position,d="#ff2626";n(o,s*i,r*i,3,d,c.part+" "+c.score.toFixed(4))}}(o,c,e)})}function n(e,t,n,o,i,a){e.beginPath(),e.arc(n,t,o,0,2*Math.PI),e.fillStyle=i,e.fillText(a,n+5,t),e.fill()}const o=document.getElementById("msgbox"),i=document.getElementById("msg");const a=800,c=650;window.debugMode=!0;posenet.load({architecture:"MobileNetV1",outputStride:16,inputResolution:513,multiplier:.75}).then(async function(n){let s;try{s=await e("video",a,c)}catch(e){throw r="Couldn't load video, please try a different browser",i.innerHTML=r,o.classList.remove("no-display"),e}var r;!function(e,n){document.getElementById("camera").classList.remove("no-display");const o=document.getElementById("output"),i=o.getContext("2d");o.width=a,o.height=c,async function o(){const s=await n.estimatePoses(e,{flipHorizontal:!0,decodingMethod:"single-person"});window.debugMode&&t(i,a,c,s,.3,.6);setTimeout(function(){requestAnimationFrame(o)},2e3)}()}(s,n)})}();