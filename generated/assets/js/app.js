!function(){"use strict";const t=800,e=650;function o(t,e,o,i,n,a){t.beginPath(),t.arc(o,e,i,0,2*Math.PI),t.fillStyle=n,t.fillText(a,o+5,e),t.fill()}posenet.load({architecture:"ResNet50",outputStride:32,inputResolution:257,quantBytes:2}).then(async function(i){async function n(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");const o=document.getElementById("video");o.width=t,o.height=e;const i=/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent),n=await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:i?void 0:t,height:i?void 0:e}});return o.srcObject=n,new Promise(t=>{o.onloadedmetadata=()=>{t(o)}})}let a;try{a=await async function(){const t=await n();return t.play(),t}()}catch(t){throw console.log("No video"),t}!function(i,n){const a=document.getElementById("output"),s=a.getContext("2d"),r=!0;a.width=t,a.height=e,async function a(){let c=[];let d;let l;const u=await n.estimatePoses(i,{flipHorizontal:r,decodingMethod:"single-person"});60==Math.floor(100*Math.random()+1)&&console.log(u);c=c.concat(u);d=.4;l=.6;s.clearRect(0,0,t,e);s.save();s.scale(-1,1);s.translate(-t,0);s.drawImage(i,0,0,t,e);s.restore();c.forEach(({score:t,keypoints:e})=>{t>=.4&&function(t,e,i,n=1){for(let a=0;a<t.length;a++){const s=t[a];if(s.score<e)continue;const{y:r,x:c}=s.position,d="#ff2626";o(i,r*n,c*n,3,d,s.part+" "+s.score.toFixed(4))}}(e,.6,s)});requestAnimationFrame(a)}()}(a,i)})}();