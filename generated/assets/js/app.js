!function(){"use strict";async function e(e,t,i){const o=await async function(e,t,i){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");const o=document.getElementById(e);o.width=t,o.height=i;const n=/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent),a=await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:n?void 0:t,height:n?void 0:i}});return o.srcObject=a,new Promise(e=>{o.onloadedmetadata=()=>{e(o)}})}(e,t,i);return o.play(),o}function t(e,t,i,o,n,a){e.beginPath(),e.arc(i,t,o,0,2*Math.PI),e.fillStyle=n,e.fillText(a,i+5,t),e.fill()}const i=800,o=650;posenet.load({architecture:"MobileNetV1",outputStride:16,inputResolution:513,multiplier:.75}).then(async function(n){let a;try{a=await e("video",i,o)}catch(e){throw console.log("No video"),e}!function(e,n){const a=document.getElementById("output"),r=a.getContext("2d");a.width=i,a.height=o,async function a(){const s=await n.estimatePoses(e,{flipHorizontal:!0,decodingMethod:"single-person"});r.clearRect(0,0,i,o);!function(e,t,i,o){e.save(),e.scale(-1,1),e.translate(-i,0),e.drawImage(t,0,0,i,o),e.restore()}(r,e,i,o);s.forEach(({score:e,keypoints:i})=>{e>=.4&&function(e,i,o,n=1){for(let a=0;a<e.length;a++){const r=e[a];if(r.score<i)continue;const{y:s,x:c}=r.position;t(o,s*n,c*n,3,"#ff2626",r.part+" "+r.score.toFixed(4))}}(i,.6,r)});requestAnimationFrame(a)}()}(a,n)})}();